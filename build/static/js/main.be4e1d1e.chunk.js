(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(14),l=t.n(r),c=t(2),o=function(e){var n=e.name,t=e.number,a=e.deletePerson;return u.a.createElement("li",null,n," - ",t," ",u.a.createElement("button",{ocClick:a}))},i=function(e){var n=e.list,t=e.deletePerson;return u.a.createElement("ul",null,function(){return n.map(function(e){return u.a.createElement(o,{name:e.name,number:e.number,deletePerson:function(){return t(e.name)}})})})},m=function(e){var n=e.handleNameChange,t=e.handleNumberChange,a=e.formSubmit;return u.a.createElement("form",{onSubmit:a},u.a.createElement("div",null,"name: ",u.a.createElement("input",{onChange:n}),u.a.createElement("br",null),"number: ",u.a.createElement("input",{onChange:t})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.handleSearchfieldChange;return u.a.createElement("p",null,"Filter: ",u.a.createElement("input",{onChange:n}))},f=t(4),d=t.n(f),b=t(15),h=t(3),p=t.n(h),v="/api/persons",E={getPeople:function(){return p.a.get(v)},addPerson:function(e){return p.a.post(v,e)},deletePerson:function(e){return p.a.delete("".concat(v,"/").concat(e))},updatePerson:function(){var e=Object(b.a)(d.a.mark(function e(n,t,a){var u;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,n),e.next=3,p.a.put("".concat(v,"/").concat(n),{name:t,number:a});case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}},e)}));return function(n,t,a){return e.apply(this,arguments)}}()},g=function(e){var n=e.message,t=e.bool;if(null===n)return null;var a=t?"success":"error";return u.a.createElement("div",{className:a},n)},w=(t(40),function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],l=Object(a.useState)(""),o=Object(c.a)(l,2),f=o[0],d=o[1],b=Object(a.useState)(""),h=Object(c.a)(b,2),p=h[0],v=h[1],w=Object(a.useState)(""),O=Object(c.a)(w,2),j=O[0],C=O[1],P=Object(a.useState)(null),S=Object(c.a)(P,2),y=S[0],N=S[1],T=Object(a.useState)(null),k=Object(c.a)(T,2),L=k[0],x=k[1],R=Object(a.useState)(null),A=Object(c.a)(R,2),D=A[0],J=A[1];Object(a.useEffect)(function(){E.getPeople().then(function(e){r(e.data)})},[]);var B=t.filter(function(e){return e.name.toLocaleLowerCase().includes(j.toLocaleLowerCase())});function F(e){var n=null;return t.find(function(t){t.name===e&&(n=t)}),n}return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(g,{message:L,bool:D}),u.a.createElement(g,{message:y,bool:D}),u.a.createElement(s,{handleSearchfieldChange:function(e){C(e.target.value)}}),u.a.createElement("h3",null,"Add new number"),u.a.createElement(m,{handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){v(e.target.value)},formSubmit:function(e){e.preventDefault();var n=f.trim(),a=p;if(0===n.length)return N("Enter a name please"),setTimeout(function(){N(null)},5e3),null;if(null===F(n)){var u={name:n,number:a};E.addPerson(u).then(function(e){r(t.concat(e.data)),d(""),v(""),x("Added ".concat(n," succesfully")),J(!0),setTimeout(function(){x(null),J(null)},5e3)})}else{var l=F(n).id;window.confirm("Do you want to update ".concat(n," contact info"))?E.updatePerson(l,n,a).then(function(e){N("".concat(n," successfully updated")),J(!0),setTimeout(function(){N(null),J(null)},5e3);for(var a=[],u=0;u<t.length;u++)a.push(t[u]),t[u].id===l&&(a[u]=e);r(a)}):(d(null),J(!1),setTimeout(function(){N(null),J(null)},5e3))}}}),u.a.createElement("h3",null,"Numbers"),u.a.createElement(i,{list:B,deletePerson:function(e){var n=F(e);window.confirm("Confirm to remove ".concat(n.name))&&E.deletePerson(n.id).then(function(e){N("".concat(n.name," was succesfully removed")),J(!0),setTimeout(function(){N(null),J(null)},5e3),r(t.filter(function(e){return e.id!==n.id}))}).catch(function(e){N("ERROR: ".concat(n.name," is already removed")),J(!1),setTimeout(function(){N(null),J(null)},5e3)})}}))});l.a.render(u.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.be4e1d1e.chunk.js.map