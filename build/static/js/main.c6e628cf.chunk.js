(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),l=t.n(u),c=t(2),o=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("li",null,n.name," - ",n.number," ",r.a.createElement("button",{onClick:t},"Remove person"))},i=function(e){var n=e.list,t=e.deletePerson;return r.a.createElement("ul",null,n.map(function(e){return r.a.createElement(o,{person:e,deletePerson:function(){return t(e.name)}})}))},s=function(e){var n=e.handleNameChange,t=e.handleNumberChange,a=e.formSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:n}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{onChange:t})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.handleSearchfieldChange;return r.a.createElement("p",null,"Filter: ",r.a.createElement("input",{onChange:n}))},f=t(4),d=t.n(f),b=t(15),p=t(3),h=t.n(p),v="/api/persons",E={getPeople:function(){return h.a.get(v)},addPerson:function(e){return h.a.post(v,e)},deletePerson:function(e){return h.a.delete("".concat(v,"/").concat(e))},updatePerson:function(){var e=Object(b.a)(d.a.mark(function e(n,t,a){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,n),e.next=3,h.a.put("".concat(v,"/").concat(n),{name:t,number:a});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(n,t,a){return e.apply(this,arguments)}}()},g=function(e){var n=e.message,t=e.bool;if(null===n)return null;var a=t?"success":"error";return r.a.createElement("div",{className:a},n)},w=(t(40),function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],l=Object(a.useState)(""),o=Object(c.a)(l,2),f=o[0],d=o[1],b=Object(a.useState)(""),p=Object(c.a)(b,2),h=p[0],v=p[1],w=Object(a.useState)(""),O=Object(c.a)(w,2),j=O[0],C=O[1],P=Object(a.useState)(null),S=Object(c.a)(P,2),y=S[0],N=S[1],T=Object(a.useState)(null),k=Object(c.a)(T,2),L=k[0],R=k[1],x=Object(a.useState)(null),A=Object(c.a)(x,2),D=A[0],J=A[1];Object(a.useEffect)(function(){E.getPeople().then(function(e){u(e.data)})},[]);var B=t.filter(function(e){return e.name.toLocaleLowerCase().includes(j.toLocaleLowerCase())});function F(e){var n=null;return t.find(function(t){t.name===e&&(n=t)}),n}return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:L,bool:D}),r.a.createElement(g,{message:y,bool:D}),r.a.createElement(m,{handleSearchfieldChange:function(e){C(e.target.value)}}),r.a.createElement("h3",null,"Add new number"),r.a.createElement(s,{handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){v(e.target.value)},formSubmit:function(e){e.preventDefault();var n=f.trim(),a=h;if(0===n.length)return N("Enter a name please"),setTimeout(function(){N(null)},5e3),null;if(null===F(n)){var r={name:n,number:a};E.addPerson(r).then(function(e){u(t.concat(e.data)),d(""),v(""),R("Added ".concat(n," succesfully")),J(!0),setTimeout(function(){R(null),J(null)},5e3)})}else{var l=F(n).id;window.confirm("Do you want to update ".concat(n," contact info"))?E.updatePerson(l,n,a).then(function(e){N("".concat(n," successfully updated")),J(!0),setTimeout(function(){N(null),J(null)},5e3);for(var a=[],r=0;r<t.length;r++)a.push(t[r]),t[r].id===l&&(a[r]=e);u(a)}):(d(null),J(!1),setTimeout(function(){N(null),J(null)},5e3))}}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(i,{list:B,deletePerson:function(e){var n=F(e);window.confirm("Confirm to remove ".concat(n.name))&&E.deletePerson(n.id).then(function(e){N("".concat(n.name," was succesfully removed")),J(!0),setTimeout(function(){N(null),J(null)},5e3),u(t.filter(function(e){return e.id!==n.id}))}).catch(function(e){N("ERROR: ".concat(n.name," is already removed")),J(!1),setTimeout(function(){N(null),J(null)},5e3)})}}))});l.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.c6e628cf.chunk.js.map